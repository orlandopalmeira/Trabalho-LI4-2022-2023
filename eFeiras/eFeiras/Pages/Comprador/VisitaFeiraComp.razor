@page "/VisitaFeiraComp"
@using eFeiras.Business.Feiras;
@using eFeiras.Business.Bancas;
@using eFeiras.Shared.Comprador;

@if(Feira == null)
{
    <h5>Loading...</h5>
}
else
{// isto tem de ser melhorado (se der tempo)
    <div class="infoFeira">
        <div class="infoSection" style="padding: 10px;">
            <h5>@Feira.getName()</h5>
            <div>
                Início: @Feira.getDataInicio().ToString("dd-MM-yyyy")&nbsp;&nbsp;&nbsp;
                Fim: @Feira.getDataFim().ToString("dd-MM-yyyy")
            </div>
        </div>
        <div class="infoSection" style="padding: 5px;display: grid; grid-template-columns: repeat(2, 1fr);">
            <div style="display:flex; align-items: center; font-size: 20px">
                Categoria: @Feira.getCategoria().getNome()
            </div>
            <div style="display:flex; align-items: center; width: 100px;">
                <img src="@Feira.getImgPath()" style="width: 100%; height: auto;border-radius: 10px; object-fit: cover;">
            </div>
        </div>
    </div>
    <div style="height: 20px"></div> <!--Espaçamento-->
    @if (Feira.getBancas().Count > 0)
    {
        List<Banca> bancas = Feira.getBancas();
        <div class="scrollable">
            @foreach(Banca b in bancas)
            {
                <BancaCardComp Banca="b"></BancaCardComp>
            }
        </div>
    }
    else
    {
        <h5>Esta feira ainda não tem bancas abertas.</h5>
    }

}


<style>
    .infoFeira{
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        width: 100%;
        height: auto;
        background: #EEEEEE;
        border-radius: 19px;
    }

    .infoSection{
        width: 100%;
    }

    .scrollable{
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        grid-gap: 10px;
        overflow-y: auto;
        height: auto;
        max-height: 350px;
        width: 100%;
        background-color: #EEEEEE;
        border-radius: 19px;
        padding: 10px;
    }

</style>

@code {
    private Feira? Feira = VisitedFeira.getFeira();
}
